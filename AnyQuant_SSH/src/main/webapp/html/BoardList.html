<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!--tab上的小图标-->
    <link rel="shortcut icon" href="/image/short_cut.png">
    <link rel="stylesheet" type="text/css" href="/css/navigator.css">
    <link rel="stylesheet" type="text/css" href="/css/buttons.css">
    <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <script src="https://code.highcharts.com/highcharts.js"></script>
    <script src="https://code.highcharts.com/highcharts-more.js"></script>
    <script src="https://code.highcharts.com/modules/exporting.js"></script>

    <title>板块列表</title>
</head>
<body>
<!-- navigator begin -->
<div id="nav_bar">
    <img src="/image/duck_icon.png" style="width: 35px;height: 35px;float: left;margin-top:7px;margin-left: 10px">
    <div style="font-size: 30px;float: left;color: #ffffff;margin-left: 10px;margin-top: 7px;">DUCK</div>
    <ul id="nav_box">
        <li class="nav_item"><a class="nav_c" href="duck_main.html">股票列表</a></li>
        <li class="nav_item"><a class="nav_c" href="BoardList.html">行业分布</a></li>
        <li class="nav_item"><a class="nav_c" href="duck_optional.html">自选股</a></li>
        <li class="nav_item"><a class="nav_c" href="Analyse.html">回测系统</a></li>
    </ul>
</div>


<br><br>
<button id="initbtn" class="button button-raised button-primary button-pill" onclick="initBubble()"  style="position:relative;left:220px;">
  手气不错
</button>
<div id="bubble" style="width:80%;height:500px; margin: 0 auto"></div>
<a href="BoardDetail.html">点我跳到某个版块的界面去</a>
<script type="text/javascript">
    var globalData=[];
    $.getJSON('/Board/getAllBoards', function (data) {
        globalData=data;
        initBubble(data);
    });
    //防止重复
    function ifExist(index,num){
        for(var i=0;i<index.length;i++){
            if(index[i]==num){
                return 1;
            }
        }
        return 0;
    }
    function  initBubble(data) {
        var index=[],myData=[],length=globalData.length,i=0;
        while(i<10){
            var newNum=Math.floor(Math.random()*(length+1));
            if(ifExist(index,newNum)==0){
                index[i]=newNum;
                i++;
            }
        }
        for(var i=0;i<index.length;i++){
            myData[i]=({
                x: Math.random()*100,
                y: Math.random()*100,
                z: 25,
                name: globalData[index[i]]
            });
        }

            $('#bubble').highcharts({
                chart: {
                    type: 'bubble',
                    plotBorderWidth: 0,
                    zoomType: 'xy'
                },
                tooltip: {
                    useHTML: true,
                    headerFormat: '<table>',
                    pointFormat: '<tr><th colspan="2"><h3>{point.name}</h3></th></tr>'
                    /*+'<tr><th>Fat intake:</th><td>{point.x}g</td></tr>' +
                    '<tr><th>Sugar intake:</th><td>{point.y}g</td></tr>' +
                    '<tr><th>Obesity (adults):</th><td>{point.z}%</td></tr>'*/
                    ,

                    footerFormat: '</table>',
                    followPointer: true
                },
                legend: {
                    enabled: false
                },

                title: {
                    text: ''
                },

                xAxis: {
                    visible:false
                },

                yAxis: {
                    visible:false
                },

                plotOptions: {
                    series: {
                        cursor:'pointer',
                        events: {
                            click: function (data) {
                                var boardName=data.point.name;
                                location.href="BoardDetail.html"+"?name="+boardName;
                                alert(data.point.name);
                            }
                        },
                        dataLabels: {
                            enabled: true,
                            format: '{point.name}'
                        }
                    }
                },

                series: [{
                    data: myData
                }]

            });
    }

</script>
</body>
</html>